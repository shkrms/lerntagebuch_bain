---
title: "09 Suchmaschinen und Discoverysysteme"
date: 2023-07-11
---
## [Lerneinheit 9](https://pad.gwdg.de/F1wvRpdtR8-Mcv8so8NjUQ#)

Wo ich noch in einem der [früheren Beiträge](https://shkrms.github.io/lerntagebuch_bain/2023/07/11/tag3.html) beschrieb, dass ich den Zweck von [Solr](https://lucene.apache.org/solr/guide/8_7/solr-tutorial.html) nicht verstehe, hat diese Lerneinheit Einblicke gewährt und mein Unverständnis tilgen können. Wenn wir das [Schaubild](https://shkrms.github.io/lerntagebuch_bain/2023/07/11/tag2.html) betrachten kommt [VuFind](https://github.com/vufind-org/learning-vufind-book/releases/download/v1.1.2/LearningVuFind.pdf) hinter Solr, was nicht ganz der Komplexität des Vorgehens entspricht. VuFind ist eine Suchoberfläche, die gerne für übergeordnete Portale eingesetzt wird und als [Discoverysystem](https://de.wikipedia.org/wiki/Discovery-System) Online-Kataloge anbietet. Als Datenimport steht bei VuFind das [MARC21](https://shkrms.github.io/lerntagebuch_bain/2023/07/11/tag4.html) im Vordergrund, wodurch eine Sortierung in MARC-Felder besteht. In diesem Beitrag setzt VuFind auf der Open Source Suchmaschine Solr von Apache auf. Suchmaschinen bereiten Daten auf, dass sie schnell gefunden werden. Dabei wird auch auf Vorgänge, wie z.B. eine Konsistenzprüfung verzichtet. Solr erstellt einen Suchindex, der auch aktualisiert wird, allerdings ist die Aktualisierung sekundär. Das ist auch darauf zurückzuführen das kein verlässlicher Datenspeicher in der Suchmaschine integriert ist. Allgemein ist anzuführen, dass es sich nicht um Datenbanken, wie z.B. [MySQL](https://de.wikipedia.org/wiki/MySQL) handelt, welchen ihren Datenbestand ständig verändern. Die Daten von Solr folgen einem [Schema](https://vufind.org/wiki/development:architecture:solr_index_schema) und werden entsprechend eingelesen. Bei Solr handelt es sich um eine Vertikale Suchmaschine, was voraussetzt das sie sich nach einem Datenmodel orientiert. Da VuFind die eigentliche Suchoberfläche der Endnutzer darstellt, liefert sie die homogenisierten Daten aus den Bibliothekskatalogen und das entsprechende Schema, welches sich nach MARC21 orientiert. Das ist darauf zurückzuführen, dass Bibliotheken weniger Volltextsuchen machen und die Suche in Erschliessungsdaten vorziehen. Das eingelesene Schema wird in den Log-Dateien über das Terminal, aber auch auf der Oberfläche von Solr dargestellt.

Befehl für Log-Datei:  less +F /usr/local/vufind/solr/vufind/logs/solr.log

Dieses bestimmt z.B. wie eine ISBN abgelegt wird, was als Textfield geschehen würde, aber auch die ID und deren Type, z.B. String wird hinterlegt. Durch die Suchanfrage via VuFind wird in Solr ein Suchindex erstellt, wobei eine Trefferliste im Schema erstellt und an VuFind übermittelt wird. Bei der Suche liefert Solr auch direkt eine Autovervollständigung, Highlightning und ein Relevanzranking. Das Relevanzranking baut auf einer Score-Berechnung, die wiederum auf die Datensätze abgestimmt ist und auf Erfahrungswerten beruht. Sollte man direkt in der Oberfläche von Solr suchen, wird eine Darstellung in JSON wiedergegeben, die alle Eigenschaften auflistet, z.B. sind die Facetten im JSON enthalten, während VuFind diese neben den gesuchten Werken aufzeigt. Der Einblick in die Log-Dateien sind interessant, so kann man das Query zurückverfolgen, z.B. Werte in &facet.field. Möchte man Einstellungen vornehmen, ist das mittels Terminal, umzusetzen. Man braucht nicht den Quellcode zu verändern, sondern kann direkt in die Konfigurationsdatei wechseln. In der Hauptkonfiguration sind auch die zugelassenen Systeme aufgelistet. 

Bei einer Datenintegration wird MARCXML in den Suchindex eingespielt. Dazu wird der alte Suchindex gelöscht und neue Verzeichnisse unter dem Importverzeichnis angelegt, worauf die Daten integriert werden können. Das marc_local_properties entspricht dem Konfigurationsverzeichnis und legt das [Mapping](https://shkrms.github.io/lerntagebuch_bain/2023/07/11/tag8.html) der Daten fest. Das Verständnis zu den Script kann so erklärt werden. MARC-Daten gehen via Import-Script von VuFind in das Solr. Durch die Software Solrmarc werden MARC-Daten in ein Solr-Schema geladen und von dort nutzt VuFind die Daten, um sie als Katalog anzubieten. Ein vollständiges Discoverysystem braucht Metadaten aus einem Suchindex, Solr, und es werden Schnittstellen benötigt, VuFind. Die Schnittstellen werden auch bei Online-Quellen eingesetzt, um Verfügbarkeiten nach Berechtigung anzuzeigen. Jedes Discoverysysteme bestehen durch Systemtrennung, Frontend, Backend, Schnittstellen, jedoch werden diese bei kommerziellen Produkten, z.B. Alma, als Gesamtpaket angeboten. Die Handbücher zu [Solr](https://lucene.apache.org/solr/guide/8_7/solr-tutorial.html) und [VuFind](https://github.com/vufind-org/learning-vufind-book/releases/download/v1.1.2/LearningVuFind.pdf) bieten weitere wichtige Einblicke und Tutorials. 
